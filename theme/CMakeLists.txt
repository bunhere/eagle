
FIND_PROGRAM (EDJE_CC_EXECUTABLE edje_cc)
IF (NOT EDJE_CC_EXECUTABLE)
    MESSAGE (FATAL_ERROR "edje_cc could not be found")
ENDIF ()

SET(THEME_DIR "${CMAKE_BINARY_DIR}/theme")
FILE(MAKE_DIRECTORY ${THEME_DIR})

SET(EAGLE_THEME ${THEME_DIR}/eagle.edj)
SET(EAGLE_THEME_SOURCE ${CMAKE_SOURCE_DIR}/theme/eagle.edc)

ADD_CUSTOM_COMMAND(
    OUTPUT ${EAGLE_THEME}
    COMMAND ${EDJE_CC_EXECUTABLE} -v -id ${CMAKE_SOURCE_DIR}/theme ${EAGLE_THEME_DEFINITION} ${EAGLE_THEME_SOURCE} ${EAGLE_THEME}
    DEPENDS
        ${EAGLE_THEME_SOURCE}
        ${CMAKE_SOURCE_DIR}/theme/browser-view.edc
        ${CMAKE_SOURCE_DIR}/theme/browser-urlbar.edc
        ${CMAKE_SOURCE_DIR}/theme/multitab.edc
)

LIST(APPEND EAGLE_EXECUTABLE_SOURCES
    ${EAGLE_THEME}
)
